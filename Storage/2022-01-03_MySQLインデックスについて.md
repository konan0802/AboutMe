# 2022-01-03_MySQLインデックスについて

## **1. マルチカラムインデックスの効用**
1つのSQLにおいて条件(`WHERE`)内で複数のカラムを指定する際に、  
それぞれのカラムが、それぞれインデックスが貼られていたとしても、  
1つのSQLを実行するとき1つのテーブルにつき1つのインデックスしか使用できないため  
インデックスが効かない！

その際はマルチカラムインデックスを利用すれば、複数のカラムに対してインデックスが貼れる

[MySQLのIndexをはるコツ](https://qiita.com/katsukii/items/3409e3c3c96580d37c2b#index%E3%81%AE%E4%BB%98%E3%81%91%E6%96%B9)

## **2. マルチカラムインデックスを参照する際の注意点**
### **◇ インデックスが利用されないケース**
マルチカラムインデックスへの参照(`SELECT`)において  
複合させた2つ目のカラムを単独で指定するような条件(`WHERE`)ではインデックスが効かない！

[パフォーマンスの遅いSQL。インデックスを使わないSQLとは？](https://sql-oracle.com/?p=1057#:~:text=%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%A8%E3%81%AA%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82-,%E4%BE%8B6.%20%E8%A4%87%E5%90%88%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E9%A0%86%E7%95%AA%E3%82%92%E7%84%A1%E8%A6%96%20%E3%81%AF%E9%81%85%E3%81%84,-%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E4%BD%BF%E7%94%A8)

### **◇ インデックスの貼り方による速度変化**
マルチカラムインデックスと条件(`WHERE`)で指定する順番を同じにすることで速度が大幅に改善する

[MySQL：indexの貼り方には要注意。速度低下の原因はインデックスだった。](https://qol-kk.com/wp2/blog/2019/11/14/post-1315/#:~:text=%E3%81%AE%E9%A0%86%E7%95%AA%E3%81%A7%E3%81%99%E3%80%82-,%E8%A4%87%E5%90%88%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AF%E9%A0%86%E7%95%AA%E3%82%82%E9%87%8D%E8%A6%81,-%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E6%95%B0%E3%81%8C)

## **3. インデックスに関する調査**
`EXPLAIN`コマンドによってインデックスが利用されているか確認することができる

[Indexが利用されているか調査](https://qiita.com/katsukii/items/3409e3c3c96580d37c2b#index%E3%81%8C%E5%88%A9%E7%94%A8%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E8%AA%BF%E6%9F%BB)